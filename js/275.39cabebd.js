"use strict";(self["webpackChunksimple_twitter"]=self["webpackChunksimple_twitter"]||[]).push([[275],{7891:function(t,e,a){a.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"sidebar"},[e("div",[t._m(0),e("div",{staticClass:"sidebar--menu"},[e("router-link",{staticClass:"d-flex align-items-center",attrs:{to:"/admin/main"}},["admin-main"===t.$route.name?e("img",{staticClass:"icon",attrs:{src:a(8133),alt:"home-page"}}):e("img",{staticClass:"icon",attrs:{src:a(9080),alt:"home-page"}}),e("span",[t._v("推文清單")])]),e("router-link",{staticClass:"d-flex align-items-center",attrs:{to:"/admin/users"}},["admin-users"===t.$route.name?e("img",{staticClass:"icon",attrs:{src:a(7630),alt:"profile-page"}}):e("img",{staticClass:"icon",attrs:{src:a(656),alt:"profile-page"}}),e("span",[t._v("使用者列表")])])],1)]),e("div",{staticClass:"sidebar--menu"},[e("router-link",{staticClass:"d-flex align-items-center",attrs:{to:"/signin"}},[e("img",{staticClass:"icon",attrs:{src:a(7969),alt:"setting-page"}}),e("span",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.logout.apply(null,arguments)}}},[t._v("登出")])])],1)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar--logo"},[e("img",{staticClass:"icon-logo",attrs:{src:a(5013),alt:"logo"}})])}],r=(a(7658),{methods:{logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/admin/signin")}}}),n=r,o=a(1001),c=(0,o.Z)(n,s,i,!1,null,"127c3aa7",null),l=c.exports},4275:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__container"},[e("AdminNav"),t.isLoading?e("Spinner"):e("div",{staticClass:"main"},[e("div",{staticClass:"main__title"},[e("h4",[t._v("推文清單")])]),e("div",{staticClass:"main__post"},[e("div",{staticClass:"tweet__card__wrapper"},t._l(t.tweetsCurrentPage,(function(s){return e("div",{key:s.id,staticClass:"tweet__card"},[e("div",{staticClass:"tweet__card__content"},[e("div",{staticClass:"tweet__card__title"},[e("img",{staticClass:"tweet__card__avatar",attrs:{src:t._f("emptyAvatar")(s.tweetAuthor.avatar),alt:"avatar"}}),e("p",{staticClass:"tweet__card__name"},[t._v(t._s(s.tweetAuthor.name))]),e("p",{staticClass:"tweet__card__account"},[t._v("@"+t._s(s.tweetAuthor.account))]),e("p",{staticClass:"tweet__card__time"},[t._v("・"+t._s(t._f("fromNow")(s.createdAt)))])]),e("div",{staticClass:"tweet__card__description"},[t._v(" "+t._s(s.description)+" ")])]),e("img",{staticClass:"tweet__card__delete",attrs:{src:a(4856),alt:"delete-tweet-icon"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteTweet(s.id)}}})])})),0),e("nav",{staticClass:"my-4",attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"pagination justify-content-center",attrs:{id:"paginator"}},t._l(t.paginator,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:a===t.currentPage}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handlePageChange(a)}}},[t._v(t._s(a))])])})),0)])])])],1)},i=[],r=(a(1703),a(7658),a(7891)),n=a(4711),o=a(3459),c=a(6163),l=a(8428),g={mixins:[o.qk,o.XR],components:{AdminNav:r.Z,Spinner:l.Z},data(){return{isLoading:!0,tweetsTotal:[],tweetsCurrentPage:[],paginator:[],currentPage:1,tweetsPerPage:10}},created(){this.fetchTweets()},methods:{async fetchTweets(){try{const t=await n.Z.getTweets(),{data:e}=t;if("error"===e.status)throw new Error(e.message);this.tweetsTotal=e,this.getTweetByPage(1),this.renderPaginator(this.tweetsTotal.length),this.isLoading=!1}catch(t){console.error(t),this.isLoading=!1,c.bW.fire({title:"無法取得推文清單，請稍後再試"})}},async deleteTweet(t){try{const{data:e}=await n.Z.deleteTweet({id:t});if("error"===e.status)throw new Error(e.message);this.tweetsTotal=this.tweetsTotal.filter((e=>e.id!==t)),this.getTweetByPage(this.currentPage)}catch(e){console.error(e),c.bW.fire({title:"無法刪除該推文，請稍後再試"})}},getTweetByPage(t){const e=(t-1)*this.tweetsPerPage;this.tweetsCurrentPage=this.tweetsTotal.slice(e,e+this.tweetsPerPage)},renderPaginator(t){const e=Math.ceil(t/this.tweetsPerPage);for(let a=1;a<=e;a++)this.paginator.push(a)},handlePageChange(t){this.currentPage=t,this.getTweetByPage(t)}}},d=g,A=a(1001),u=(0,A.Z)(d,s,i,!1,null,"5b59908e",null),_=u.exports},4856:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGpSURBVHgB7ZjBbcIwFIafzQKM0CGQaLdgg9IbEqe2C9ABWnFB4tZ0Gg5waDegG2QCu3lVoyZRQp7t3wek910CIfH7PxHZLyZSFEVRlCvGSC5ar5/vnTNbIl9aS5vd7vWDMhBTx5IA52hTHaaV701VoOBCBOYvfNGos5XcJxKoBpw2v6ElGuEb+FJyr0jAe/fYPYeS6A/PNf2L5P6J5KLT6fA5m91+G2MW7SJmMZ/fnY/HwxdFMBzePez3b4VkDJEAg5ZAhGfEAgxKAhWeCRJgUiWQ4ZlgASZWAh2eiRJgQiVyhGeiBRipRK7wjKiVGGO1eloaY9+75631Sz7mCs9ABJghiT5Q4ZmkR6jJ0OPUBRmegQkwYxLo8IywmZMzmRgf81t0PQIyNNvUpPZOfcAExsLXoCUgs9Clef63yMAUi3izS/4HxhapXK14TZKAdIXNKREtENoe5JKIEojtbXJIBAukNmZoiSABVFeJlBALoFtilIRIIFc/j5AI2ZmjdhFMY8Zj1Ateu2bGnTl0V9kvAd+Z8+fqY5mjJWb+Jeo6sp05RVEURblqfgDooQjV9btoPQAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=275.39cabebd.js.map