"use strict";(self["webpackChunksimple_twitter"]=self["webpackChunksimple_twitter"]||[]).push([[41],{9897:function(t,e,s){s.d(e,{Z:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.submitSetting.apply(null,arguments)}}},[e("div",{staticClass:"form-wrapper"},[e("label",{staticClass:"d-block",attrs:{for:"account"}},[t._v("帳號")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"d-block",attrs:{type:"text",id:"account",name:"account",placeholder:"請輸入帳號",required:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),e("div",{staticClass:"d-flex justify-content-between"},[e("span",{staticClass:"input__info"},[t._v(t._s(t.accountThreshold>10?"字數超出上限！":""))]),e("span",{staticClass:"input__counter"},[t._v(t._s(t.accountThreshold)+"/10")])])]),e("div",{staticClass:"form-wrapper"},[e("label",{staticClass:"d-block",attrs:{for:"name"}},[t._v("名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"d-block",attrs:{type:"text",id:"name",name:"name",placeholder:"請輸入使用者名稱",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("div",{staticClass:"d-flex justify-content-between"},[e("span",{staticClass:"input__info"},[t._v(t._s(t.nameThreshold>50?"字數超出上限！":""))]),e("span",{staticClass:"input__counter"},[t._v(t._s(t.nameThreshold)+"/50")])])]),e("div",{staticClass:"form-wrapper"},[e("label",{staticClass:"d-block",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"d-block",attrs:{type:"email",id:"email",name:"email",placeholder:"請輸入 Email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),e("div",{staticClass:"form-wrapper"},[e("label",{staticClass:"d-block",attrs:{for:"password"}},[t._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"d-block",attrs:{type:"password",id:"password",name:"password",placeholder:"請設定密碼",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),e("div",{staticClass:"form-wrapper"},[e("label",{staticClass:"d-block",attrs:{for:"checkPassword"}},[t._v("密碼確認")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],staticClass:"d-block",attrs:{type:"password",id:"checkPassword",name:"checkPassword",placeholder:"請再次輸入密碼",required:""},domProps:{value:t.checkPassword},on:{input:function(e){e.target.composing||(t.checkPassword=e.target.value)}}})]),t.isSignUp?[e("div",[e("button",{attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.submitSignUp.apply(null,arguments)}}},[t._v("註冊")])]),e("div",{staticClass:"router_wrapper text-center"},[e("router-link",{attrs:{to:"/signin"}},[t._v("取消")])],1)]:[t._m(0)]],2)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticStyle:{width:"88px"},attrs:{type:"submit"}},[t._v("儲存")])])}],r=(s(1703),s(7658),s(7214)),n=s(9682),o=s(6163),c={props:{isSignUp:{type:Boolean,required:!0},initialUser:{type:Object,default:()=>({id:"",account:"",name:"",email:"",password:"",checkPassword:""})}},data(){return{id:"",account:"",name:"",email:"",password:"",checkPassword:""}},watch:{initialUser:{handler(t){this.id=t.id,this.account=t.account,this.name=t.name,this.email=t.email,this.password=t.password,this.checkPassword=t.checkPassword}}},mounted(){this.renderUser()},methods:{renderUser(){this.account=this.initialUser.account,this.name=this.initialUser.name,this.email=this.initialUser.email,this.id=this.initialUser.id},async submitSignUp(){try{if(!this.account||!this.name||!this.email||!this.password||!this.checkPassword)return void o.KV.fire({title:"請確認已填寫所有欄位"});if(this.account.length>10)return void o.KV.fire({title:"帳號字數超過上限"});if(this.name.length>50)return void o.KV.fire({title:"名稱字數超過上限"});if(this.password!==this.checkPassword)return void o.KV.fire({title:"密碼確認沒有正確輸入"});const t=await r.Z.signUp({account:this.account,name:this.name,email:this.email,password:this.password,checkPassword:this.checkPassword}),{data:e}=t;if("error"===e.status)throw new Error(e.message);o.FN.fire({title:"註冊成功，請先登入帳號"}),this.$router.push("/signin")}catch(t){console.error(t),o.bW.fire({title:t.response.data.message})}},async submitSetting(t){try{if(!this.account||!this.name||!this.email||!this.password||!this.checkPassword)return void o.KV.fire({title:"請確認已填寫所有欄位"});if(this.account.length>10)return void o.KV.fire({title:"帳號字數超過上限"});if(this.name.length>50)return void o.KV.fire({title:"名稱字數超過上限"});if(this.password!==this.checkPassword)return void o.KV.fire({title:"密碼確認沒有正確輸入"});const e=t.target,s=new FormData(e),a=await n.Z.updateSetting({id:this.id,formData:s}),{data:i}=a;if("error"===i.status)throw new Error(i.message);this.$store.dispatch("fetchCurrentUser"),o.FN.fire({title:i.message}),this.$router.push("/main")}catch(e){console.error(e),o.bW.fire({title:e.response.data.message})}}},computed:{accountThreshold(){const t=this.account.length;return t},nameThreshold(){const t=this.name.length;return t}},updated(){this.accountThreshold>10?document.getElementById("account").style.borderBottomColor="#FC5A5A":document.getElementById("account").style.borderBottomColor=null,this.nameThreshold>50?document.getElementById("name").style.borderBottomColor="#FC5A5A":document.getElementById("name").style.borderBottomColor=null}},l=c,d=s(1001),u=(0,d.Z)(l,a,i,!1,null,"6dc445c1",null),m=u.exports},41:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting__container"},[e("MainNav"),e("div",{staticClass:"setting"},[t._m(0),e("div",{staticClass:"setting__post"},[e("AccountForm",{attrs:{isSignUp:!1,initialUser:t.currentUser}})],1)])],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting__title"},[e("h4",[t._v("帳戶設定")])])}],r=s(8189),n=s(9897),o=s(629),c={computed:{...(0,o.rn)(["currentUser"])},components:{MainNav:r.Z,AccountForm:n.Z}},l=c,d=s(1001),u=(0,d.Z)(l,a,i,!1,null,"251b68d2",null),m=u.exports}}]);
//# sourceMappingURL=41.83e4a977.js.map